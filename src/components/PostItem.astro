---
import FormattedDate from "@components/FormattedDate.astro";

import Tag from "@components/Tag.astro";

const { post } = Astro.props;
const { title, description, pubDate, author, heroImage, tags } = post.data;
const href = `/blog/${post.slug}/`;
---

<li class="flex flex-col mb-5 p-3 acrylic">
  <a href={href} class="text-2xl font-bold py-2 hover:underline">{title}</a>
  <div class="flex justify-between items-center">
    {
      heroImage && (
        <a href={href} class="p-2 w-1/3">
          <figure id="heroImage" class="w-full h-full">
            <img
              src={heroImage}
              alt={title}
              loading="lazy"
              class="object-contain"
            />
          </figure>
        </a>
      )
    }

    <div class="flex flex-col flex-grow">
      <p
        class="text-base p-2"
        title={description ? description : post.body.substring(0, 150)}
      >
        {description ? description : post.body.substring(0, 150)}
      </p>
      <div class="flex justify-between items-center">
        <span><FormattedDate date={pubDate} />{author}</span>
        <div class="flex justify-end items-center w-1/2">
          {
            tags.map((tag) => (
              <a href={`/tags/${tag}`}>
                <Tag tag={tag} />
              </a>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</li>
